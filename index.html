<html>
  <head>
    <title>Boat</title>
    <script src="build.js"></script>
    <script src="scripts/set-image.js"></script>
  </head>
  <body>
    <a-scene fog="type: exponential; density: 0.5; color: #10AAF6; far 6; near:0">

    <a-assets>
      <a-asset-item id="boat-obj" src="assets/OldBoat.obj"></a-asset-item>
      <a-asset-item id="boat-mtl" src="assets/OldBoat.mtl"></a-asset-item>
      <img id="pic1" crossorigin="anonymous" src="img/pic1.jpg">

      <!-- <script id="link" type="text/html">
          <a-entity class="link"
            geometry="primitive: plane; height: 1; width: 1"
            material="shader: flat; src: ${thumb}"
            event-set__1="_event: mousedown; scale: 1 1 1"
            event-set__2="_event: mouseup; scale: 1.2 1.2 1"
            event-set__3="_event: mouseenter; scale: 1.2 1.2 1"
            event-set__4="_event: mouseleave; scale: 1 1 1"
            set-image="on: click; target: #image-360; src: ${src}"
            sound="on: click; src: #click-sound"></a-entity>
        </script> -->
    </a-assets>
      
      <a-entity position="0 0 0">
        <a-camera></a-camera>
        
        <a-entity id="remote" daydream-controller raycaster="objects: .selectable">
          <a-cone id="ray" color="cyan" position="0 0 -2" rotation="-90 0 0" radius-bottom="0.005" radius-top="0.001" height="4"></a-cone>
          <a-box id="position-guide" visible="false" position="0 0 -2"></a-box>
        </a-entity>
      </a-entity>

        <!-- THE WATER -->
      <a-entity geometry="primitive: plane" position="0 -7 0" rotation="90 0 0" scale="200 200" material="color:#10AAF6; opacity: 0.9; side: double"></a-entity>

      <a-entity geometry="primitive:plane" position="0 -6.1 0" rotation="90 0 0" scale="199 199" material="opacity: 0.2; color:#10AAF6; side: double">
        <a-animation attribute="position"
           from="0 -6.0 0"
           to="0 -6.3 0"
           dur="1000"
           repeat="indefinite"
           direction="alternate">
        </a-animation>
      </a-entity>
      
      <!-- OBJ MODEL -->
      <a-obj-model src="#boat-obj" mtl="#boat-mtl" position="0 -7 0" scale="0.5 0.5 0.5" rotation="0 180 0" id="boat"><a-obj-model>

      <!-- SPHERE -->
      <a-entity id="links" layout="type: line; margin: 1.5" position="0 -1 -4">
        <a-entity template="src: #link" data-src="#cubes" data-thumb="#cubes-thumb"></a-entity>
        <a-entity template="src: #link" data-src="#city" data-thumb="#city-thumb"></a-entity>
        <a-entity template="src: #link" data-src="#sechelt" data-thumb="#sechelt-thumb"></a-entity>
        <a-sphere id="sphere" template="src: #link" data-src="#sechelt" data-thumb="sphere"></a-sphere>
      </a-entity>

      <a-sphere id="sphere1" class="selectable" material= "color:orange; shader: flat" radius="3" position="0 2 40"></a-sphere>           
    
      
      <!-- SKYBOX -->
      <a-sky radius="100" color="#10AAF6"></a-sky>

      <!-- LIGHT -->
      <a-entity light="type:ambient; color:white; intensity: 0.8" position="0 0 0"></a-entity>
      <a-entity light="type:directional; color:white" position="1 1 1 intensity: 1"></a-entity>
    </a-scene>
    
    <!-- GitHub Corner. -->
   <!--  <a href="https://github.com/ryanbetts/aframe-daydream-controller-component" class="github-corner">
      <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#222; color:#fff; position: absolute; top: 0; border: 0; right: 0;">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
      </svg>
    </a> -->

    <script>
      var remote = document.querySelector('#remote');
      var sphere1 = document.querySelector('#sphere1');
      var ray = document.querySelector('#ray');
      var touchStartAxes;
      var minScale = 0.1;
      var scaleMultiplier = 1;
      var newScale = currentScale = 1;
      var focused = false;
      // sphere color change
      sphere1.addEventListener('raycaster-intersected', function () {
        if (focused) return;
        focused = true;
        sphere.setAttribute('material','src:img/pic1.jpg');
      });
      sphere1.addEventListener('raycaster-intersected-cleared', function () {
        focused = false;
        sphere.setAttribute('color','orange');
        sphere.setAttribute('material','shader: flat');
      })
      // trackpad to scale
      remote.addEventListener('axismove', function (e) {
        if (!touchStartAxes) return;
        var deltaX = e.detail.axis[0] - touchStartAxes[0];
        newScale = currentScale + deltaX*scaleMultiplier;
        if (newScale < minScale) newScale = minScale;
        sphere1.setAttribute('scale',newScale+' '+newScale+' '+newScale);
      });
      remote.addEventListener('touchstart', function (e) {
        touchStartAxes = e.detail.axis;
      });
      remote.addEventListener('touchend', function (e) {
        touchStartAxes = null;
        currentScale = newScale;
      });
      remote.addEventListener('buttondown', function (e) {
        sphere1.setAttribute('color','black');
        location.href='capecod.html'
      });
      remote.addEventListener('buttonup', function (e) {
        if (focused) {
          sphere1.setAttribute('color','purple');
        } else {
          sphere1.setAttribute('color','orange');
        }
      });
    </script>

    
  </body>
</html>
